<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ételfutár alkalmazás - FoodDeliveryApp">
    <title><?php echo $config['menu'][$page]['title']; ?> - <?php echo $config['common_data']['app_name']; ?></title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Felső menüsáv (narancssárga) -->
    <nav class="top-menu" aria-label="Fő navigáció">
        <div class="menu-container">
            <ul>
                <?php foreach ($config['menu'] as $key => $menu_item): ?>
                    <?php if ($key !== 'logout' && $key !== 'login' && $key !== 'register'): ?>
                        <?php if ($key !== 'upload' && $key !== 'messages' && $key !== 'gallery' || ($key === 'upload' && isset($_SESSION['user'])) || ($key === 'messages' && isset($_SESSION['user'])) || ($key === 'gallery' && isset($_SESSION['user']))): ?>
                            <li><a href="index.php?page=<?php echo $key; ?>" aria-current="<?php echo $page === $key ? 'page' : 'false'; ?>"><?php echo $menu_item['title']; ?></a></li>
                        <?php endif; ?>
                    <?php endif; ?>
                <?php endforeach; ?>
                <?php if (!isset($_SESSION['user'])): ?>
                    <li><a href="index.php?page=login">Bejelentkezés</a></li>
                    <li><a href="index.php?page=register">Regisztráció</a></li>
                <?php endif; ?>
                <?php if (isset($_SESSION['user'])): ?>
                    <li><a href="index.php?page=logout">Kilépés</a></li>
                <?php endif; ?>
            </ul>
            <!-- Bejelentkezett felhasználó jelzése -->
            <?php if (isset($_SESSION['user'])): ?>
                <div class="user-info">
                    Bejelentkezett: <?php echo htmlspecialchars($_SESSION['user']['family_name']); ?> <?php echo htmlspecialchars($_SESSION['user']['given_name']); ?> (<?php echo htmlspecialchars($_SESSION['user']['username']); ?>)
                </div>
            <?php endif; ?>
        </div>
    </nav>

    <main>
        <section id="content" aria-labelledby="page-title">
            <h2 id="page-title"><?php echo $config['menu'][$page]['title']; ?></h2>
            <?php if (isset($error)): ?>
                <p style="color: red;"><?php echo $error; ?></p>
            <?php endif; ?>
            <?php if (isset($success)): ?>
                <p style="color: green;"><?php echo $success; ?></p>
            <?php endif; ?>

            <?php if ($page === 'home'): ?>
                <div class="hero">
                    <h2>Rendelj most, érkezünk 30 percen belül!</h2>
                    <p>Friss pizzák, gyors kiszállítás - a kedvenc ízeid egy kattintásra!</p>
                    <button onclick="window.location.href='index.php?page=contact'">Rendelj most!</button>
                </div>
                <article>
                    <header>
                        <h2>Üdvözöljük a FoodDeliveryApp-ban!</h2>
                        <p><strong>Finom ételek, gyors kiszállítás - rendelj most!</strong></p>
                    </header>
                    <section>
                        <h3>Videók</h3>
                        <div class="video-gallery">
                            <figure>
                                <video controls width="300">
                                    <source src="videos/pizza-delivery.mp4" type="video/mp4">
                                    A böngésző nem támogatja a videó lejátszását.
                                </video>
                                <figcaption>Pizza kiszállítás (5 mp)</figcaption>
                            </figure>
                            <figure>
                                <iframe width="300" height="169" src="https://www.youtube.com/embed/1-SJGQ2HLp8" title="How to Make a Pizza at Home" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                <figcaption>Hogyan készíts pizzát otthon</figcaption>
                            </figure>
                        </div>
                        <h3>Kedvenc pizzáink</h3>
                        <div class="gallery">
                            <figure>
                                <img src="https://images.unsplash.com/photo-1604382354936-07c5d9983bd3?q=80&w=600" alt="Pizza 1" width="200" loading="lazy">
                                <figcaption>Margherita Pizza</figcaption>
                            </figure>
                            <figure>
                                <img src="https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?q=80&w=600" alt="Pizza 2" width="200" loading="lazy">
                                <figcaption>Pepperoni Pizza</figcaption>
                            </figure>
                        </div>
                        <h3>Hol találsz minket?</h3>
                        <figure>
                            <iframe width="100%" height="300" frameborder="0" style="border:0" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2695.671!2d19.052614!3d47.497912!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4741dc3f8a1d4e5d%3A0x9e4aLeakageb1f5c5f8a8c!2sErzs%C3%A9bet%20t%C3%A9r%2C%20Budapest%2C%201051%20Hungary!5e0!3m2!1sen!2sus!4v1698771234567!5m2!1sen!2sus" allowfullscreen></iframe>
                            <figcaption>Irodánk helye: Budapest, 1051, Erzsébet tér</figcaption>
                        </figure>
                        <details>
                            <summary>Tudj meg többet az alkalmazásról</summary>
                            <p>A FoodDeliveryApp egy modern ételfutár alkalmazás, amely lehetővé teszi, hogy gyorsan és egyszerűen rendelj pizzát és más finomságokat a legjobb éttermekből. Támogatjuk a készpénzes és online fizetést is!</p>
                        </details>
                    </section>
                    <aside>
                        <h3>Miért válassz minket?</h3>
                        <ul>
                            <li>Gyors kiszállítás</li>
                            <li>Friss alapanyagok</li>
                            <li>Kedvező árak</li>
                        </ul>
                    </aside>
                </article>

        </body>
    </html>